<script setup lang="ts">
import { computedStyle } from 'pinceau/runtime'

defineProps({
  blank: {
    type: Boolean,
    required: false,
    default: false
  },
  color: computedStyle('color', 'primary', false),
  href: {
    type: String,
    default: ''
  },
  icon: {
    type: String,
    default: ''
  },
  ...variants
})
</script>

<template>
  <NuxtLink class="button-link" :to="href" :target="blank ? '_blank' : undefined">
    <Icon v-if="icon" :name="icon" />
    <ContentSlot :use="$slots.default" unwrap="p ul li" />
  </NuxtLink>
</template>

<style lang="ts" scoped>
css({
  '.button-link': {
    display: 'inline-flex',
    flex: 'none',
    alignItems: 'center',
    borderRadius: '{radii.md}',
    transition: 'all 100ms ease-in-out',
    fontWeight: '{fontWeight.bold}',
    color: '{color.white}',
    backgroundColor: (props, utils) => utils.scale('color', props.color, '600'),
    '&:hover': {
      backgroundColor: (props, utils) => utils.scale('color', props.color, '500')
    },
    '&:focus': {
      border: (props, utils) => `1px solid ${utils.scale('color', props.color, '600')}`
    },
    '.icon': {
      marginRight: '{space.1}'
    }
  },
  variants: {
    size: {
      small: {
        padding: `{space.2} {space.4}`,
        fontSize: '{text.sm.fontSize}',
        lineHeight: '{text.sm.lineHeight}',
      },
      medium: {
        padding: `{space.rem.625} {space.5}`,
        fontSize: '{text.base.fontSize}',
        lineHeight: '{text.base.lineHeight}',
      },
      large: {
        padding: `{space.3} {space.6}`,
        fontSize: '{text.lg.fontSize}',
        lineHeight: '{text.lg.lineHeight}',
      },
      giant: {
        padding: `{space.4} {space.8}`,
        fontSize: '{text.lg.fontSize}',
        lineHeight: '{text.lg.lineHeight}',
      },
      options: {
        default: 'medium'
      }
    },
    transparent: {
      true: {
        backgroundColor: `transparent`,
      }
    }
  }
})
</style>
