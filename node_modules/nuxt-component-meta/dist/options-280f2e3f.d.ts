import { ComponentMeta, MetaCheckerOptions } from 'vue-component-meta';
import { Component, ComponentsDir, ComponentsOptions } from '@nuxt/schema';

type ComponentData = Component & { meta: ComponentMeta}

type NuxtComponentMeta = Record<string, ComponentData>

interface HookData {
  meta: NuxtComponentMeta
  path: string
  source: string
}

interface ModuleOptions {
    outputDir?: string;
    rootDir?: string;
    debug?: boolean | 2;
    componentDirs: (string | ComponentsDir)[];
    components?: ComponentsOptions[];
    exclude?: string[];
    checkerOptions?: MetaCheckerOptions;
    transformers?: ((component: any, code: string) => ({
        component: any;
        code: string;
    }))[];
}
interface ModuleHooks {
    'component-meta:transformers'(data: HookData): void;
}

export { ModuleOptions as M, ModuleHooks as a };
